-- DROP TABLES
DROP TABLE IF EXISTS Pub;
DROP TABLE IF EXISTS NeighbourCounty;
DROP TABLE IF EXISTS Person;
DROP TABLE IF EXISTS Visit;
DROP TABLE IF EXISTS Covid_Diagnosis;

DELETE FROM Visit;

DELETE FROM Person WHERE PPSN = "3";

-- SELECT TABLES
SHOW TABLES;
SELECT * FROM Pub;
SELECT * FROM NeighbourCounty;
SELECT * FROM Person;
SELECT * FROM Visit;
SELECT * FROM Covid_Diagnosis;

-- DROP VIEWS
-- DROP VIEW IF EXISTS COVID_NUMBERS;
-- DROP VIEW IF EXISTS PERSON_ALLOWED_COUNTIES;
-- DROP VIEW IF EXISTS PERSON_ALLOWED_PUBS;

-- SELECT VIEWS
SELECT * FROM COVID_NUMBERS;
SELECT * FROM PERSON_ALLOWED_COUNTIES;
SELECT * FROM PERSON_ALLOWED_PUBS;

-- TESTING
INSERT INTO Person VALUES ("5", "Nora", "Roscommon", 55, 3);
INSERT INTO Pub VALUES ("L1111", "Tzar's", "Roscommon");

INSERT INTO Visit VALUES ("L1111", "1", '2020-10-10 10:00:00', '2020-10-10 11:00:00'); -- check out of bounds (works)
DELETE FROM Visit v WHERE (v.PLN = "L1111" AND v.PPSN = "1");

SELECT * FROM PERSON_ALLOWED_PUBS pab WHERE pab.PLN = "L1111" AND pab.PPSN = "1";

INSERT INTO Visit VALUES ("L2345", "2", '2020-02-15 10:00:00', '2020-02-15 11:00:00'); -- check covid (works)
INSERT INTO Visit VALUES ("L2345", "2", '2021-01-15 10:00:00', '2021-01-15 11:00:00');

INSERT INTO Visit VALUES ("L2345", "2", '2021-06-15 10:00:00', '2021-06-15 13:00:00'); -- check 2 pubs same time (works)
INSERT INTO Visit VALUES ("L2345", "2", '2021-06-15 11:00:00', '2021-06-15 12:00:00');
INSERT INTO Visit VALUES ("L1234", "4", '2021-01-03 17:00:00', '2021-01-03 18:00:00');

INSERT INTO Covid_Diagnosis VALUES ("3", '2020-05-10', '2020-04-10');  -- why isn't check working?
